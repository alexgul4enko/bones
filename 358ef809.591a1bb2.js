(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{120:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return o})),a.d(n,"metadata",(function(){return s})),a.d(n,"rightToc",(function(){return i})),a.d(n,"default",(function(){return l}));var t=a(1),c=a(6),r=(a(0),a(169)),o={id:"connect_resource_type",title:"Resource config",sidebar_label:"Resource config"},s={id:"resources/connect_resource_type",title:"Resource config",description:"**Resource** is type of data to describe API endpoint.",source:"@site/docs/resources/resource.md",permalink:"/bones/docs/resources/connect_resource_type",editUrl:"https://github.com/alexgul4enko/bones/tree/master/docs/docs/resources/resource.md",sidebar_label:"Resource config",sidebar:"resourcesSitebar",previous:{title:"Inspiration",permalink:"/bones/docs/resources/resource_problem"},next:{title:"connectResources",permalink:"/bones/docs/resources/connect_resources"}},i=[{value:"namespace",id:"namespace",children:[{value:"simple <code>namespace</code>",id:"simple-namespace",children:[]},{value:"<code>namespace</code> as dynamic Url",id:"namespace-as-dynamic-url",children:[]},{value:"<code>namespace</code> as Url",id:"namespace-as-url",children:[]}]},{value:"endpoint",id:"endpoint",children:[{value:"Basic ussage",id:"basic-ussage",children:[]},{value:"Missed endpoint",id:"missed-endpoint",children:[]},{value:"Dynamic endpoint",id:"dynamic-endpoint",children:[]}]},{value:"forceUpdates",id:"forceupdates",children:[]},{value:"queries",id:"queries",children:[]},{value:"reducer",id:"reducer",children:[{value:"<code>object</code> reducer",id:"object-reducer",children:[]},{value:"<code>none</code> reducer",id:"none-reducer",children:[]},{value:"<code>replace</code> reducer",id:"replace-reducer",children:[]},{value:"<code>infinityList</code> reducer",id:"infinitylist-reducer",children:[]},{value:"custom reducer function",id:"custom-reducer-function",children:[]},{value:"baseURL",id:"baseurl",children:[]}]},{value:"cache",id:"cache",children:[]},{value:"transformValue",id:"transformvalue",children:[]},{value:"transformErrors",id:"transformerrors",children:[]},{value:"Simple syntax",id:"simple-syntax",children:[]}],b={rightToc:i};function l(e){var n=e.components,a=Object(c.a)(e,["components"]);return Object(r.b)("wrapper",Object(t.a)({},b,a,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Resource")," is type of data to describe API endpoint.\nIn general ",Object(r.b)("strong",{parentName:"p"},"Resource")," is an Object with next options:"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Option"),Object(r.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Date type"),Object(r.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"isRequired"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"namespace"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"String"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"true")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"endpoint"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"String"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"forceUpdates"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Boolean"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"queries"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Array<String",">"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"reducer"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"String","|","Function"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"baseURL"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"String"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"cache"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"cacheConfig"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"transformValue"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"function"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"transformErrors"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"function"),Object(r.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"false")))),Object(r.b)("h2",{id:"namespace"},"namespace"),Object(r.b)("p",null,"This is the main option and only 1 required.\nThis option will be used to setup:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"key in redux store to save data"),Object(r.b)("li",{parentName:"ul"},"property name to pass to Component using HOC's")),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"\nconnectResources({ namespace: 'cars' })\n\n// component\nfunction ReactComponent({ cars })\n\n// store\n{\n  cars: {\n    ...//resource data\n  }\n}\n")),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"connectResources({ namespace: 'cats' })\n\n// component\nfunction ReactComponent({ cats })\n\n// store\n{\n  cats: {\n    ...//resource data\n  }\n}\n\n")),Object(r.b)("h3",{id:"simple-namespace"},"simple ",Object(r.b)("inlineCode",{parentName:"h3"},"namespace")),Object(r.b)("p",null,"The most common usage is to define ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," as a string key in Redux"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"import { connectResources } from '@cranium/resource'\n\nfunction MyComponent({ cars }) {\n\n}\nconnectResources({ namespace: 'cars', endpoint: 'cars' })(MyComponent)\n")),Object(r.b)("h3",{id:"namespace-as-dynamic-url"},Object(r.b)("inlineCode",{parentName:"h3"},"namespace")," as dynamic Url"),Object(r.b)("p",null,"You can define ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," as an Url with dynamic arguments. In this case ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," will be used as ",Object(r.b)("inlineCode",{parentName:"p"},"endpoint")," and original value of ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," will be string without all dynamic parts"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"import { connectResources } from '@cranium/resource'\n\nfunction MyComponent({ cars }) {\n\n}\nconnectResources({ namespace: 'cars/:uuid' })(MyComponent)\n\n/*\n * same as\n * connectResources({ namespace: 'cars', endpoint: 'cars/:uuid' })(MyComponent)\n*/\n")),Object(r.b)("h3",{id:"namespace-as-url"},Object(r.b)("inlineCode",{parentName:"h3"},"namespace")," as Url"),Object(r.b)("p",null,"You can define ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," as an Url. In this case ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," will be used as ",Object(r.b)("inlineCode",{parentName:"p"},"endpoint")," and original value of ",Object(r.b)("inlineCode",{parentName:"p"},"namespace")," will be cammelCased string without all dynamic parts"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"import { connectResources } from '@cranium/resource'\n\nfunction MyComponent({ carsBmw }) {\n\n}\nconnectResources({ namespace: 'cars/bmw' })(MyComponent)\n\n/*\n * same as\n * connectResources({ namespace: 'carsBmw', endpoint: 'cars/bmw' })(MyComponent)\n*/\n")),Object(r.b)("h2",{id:"endpoint"},"endpoint"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"endpoint")," is URL String to describe your HTTP request. This field is not required and by default equals to ",Object(r.b)("inlineCode",{parentName:"p"},"namespace"),"\nTo have dynamic url config you can use ",Object(r.b)("a",Object(t.a)({parentName:"p"},{href:"https://www.npmjs.com/package/path-to-regex"}),"path-to-regex")," syntax."),Object(r.b)("h3",{id:"basic-ussage"},"Basic ussage"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function Component({ cars }) {\n  cars.fetch() // -> GET /api/carslist\n}\nconnectResources({ namespace: 'cars', endpoint: 'carslist' })(Component)\n")),Object(r.b)("h3",{id:"missed-endpoint"},"Missed endpoint"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function Component({ cars }) {\n  cars.fetch() // -> GET /api/cars\n}\nconnectResources({ namespace: 'cars' })(Component)\n")),Object(r.b)("h3",{id:"dynamic-endpoint"},"Dynamic endpoint"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function Component({ car }) {\n  car.fetch() // -> GET /api/cars\n  car.fetch({ uuid: 'tesla' }) // -> GET /api/cars/tesla\n  car.update({ uuid: 'tesla', color: 'blue' }) // -> PATCH /api/cars/tesla { color: 'blue' }\n  car.post({ model: 'tesla', color: 'blue' }) // -> POST /api/cars/tesla { model: 'tesla',  color: 'blue' }\n}\nconnectResources({ namespace: 'car' endpoint: 'cars/:uuid?'})(Component)\n")),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},Object(r.b)("inlineCode",{parentName:"p"},"endpoint")," should not contain trailing slashes"))),Object(r.b)("h2",{id:"forceupdates"},"forceUpdates"),Object(r.b)("p",null,"A boolean indicator that controls if it needed to store filters, loading, and errors in redux store. Default ",Object(r.b)("inlineCode",{parentName:"p"},"false")),Object(r.b)("p",null,"This is common usage for form submit actions where you don't need to save errors and loading states in redux."),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function Component({ car }) {\n  const { filters, isLoading, errors } = car\n  car.fetch()\n  /* \n  * with forceUpdates true\n  * filters, isLoading, errors will never change\n  * and only car.data will change\n  */\n}\nconnectResources({ namespace: 'car' forceUpdates: true })(Component)\n")),Object(r.b)("h2",{id:"queries"},"queries"),Object(r.b)("p",null,"Array of possible query params. It is recommended to pass here all possible query params that are defined in your Swagger schema. "),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"connectResources({ \n  namespace: 'cars',\n  queries: ['offset', 'limit', 'search']\n})\n")),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"It is important to define ",Object(r.b)("inlineCode",{parentName:"p"},"queries")," if you need to send HTTP request with query string.\nOtherwise your get requests will be without filters even if you pass it to ",Object(r.b)("inlineCode",{parentName:"p"},"fetch")," function"),Object(r.b)("p",{parentName:"div"},"Bad"),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"\nfunction Component({ cars }) {\n  //GET /cars\n  //offset and limit will be skipped\n  cars.fetch({ offset: 0, limit: 20 })\n}\nconnectResources({ namespace: 'cars' })(Component)\n")),Object(r.b)("p",{parentName:"div"},"Good"),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function Component({ cars }) {\n  //GET /cars?offset=0&limit=20\n  cars.fetch({ offset: 0, limit: 20 })\n}\nconnectResources({ namespace: 'cars', queries: ['offset', 'limit'] })(Component)\n")))),Object(r.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(r.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"queryString will only work for GET requests. If you need to send HHTP a query string with what ever else HTTP request type, you need to pass queries once more as overrides meta."),Object(r.b)("p",{parentName:"div"},"For example ",Object(r.b)("inlineCode",{parentName:"p"},"POST /cars?country=uk")),Object(r.b)("p",{parentName:"div"},"Bad"),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"\nfunction Component({ cars }) {\n  //POST /cars\n  // country included to body\n  //body { model: 1, color: 'red', year: 2020, country: 'uk' }\n  cars.create({ \n    model: 1, \n    color: 'red', \n    year: 2020, \n    country: 'uk' \n  })\n}\nconnectResources({ namespace: 'cars' })(Component)\n")),Object(r.b)("p",{parentName:"div"},"Good"),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"\nfunction Component({ cars }) {\n  //POST /cars?country=uk\n  // country excluded from body\n  //body { model: 1, color: 'red', year: 2020 }\n  cars.create({ \n    model: 1, \n    color: 'red', \n    year: 2020, \n    country: 'uk' \n  }, { queries: ['country'] })\n}\nconnectResources({ namespace: 'cars' })(Component)\n")))),Object(r.b)("h2",{id:"reducer"},"reducer"),Object(r.b)("p",null,"Function that will be called in ",Object(r.b)("a",Object(t.a)({parentName:"p"},{href:"https://redux.js.org/basics/reducers"}),"redux reducer"),". Default ",Object(r.b)("inlineCode",{parentName:"p"},"'replace'"),".\nBy default connect resources has already defined 4 types of most reusable reducers.\nAnd you may use it as a String."),Object(r.b)("p",null,"Or you can create your own reducer and pass is as a function"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-javascript"}),"connectResources({ namespace: 'cars', reducer: 'object' })\nconnectResources({ namespace: 'cars', reducer: 'none' })\nconnectResources({ namespace: 'cars', reducer: 'replace' })\nconnectResources({ namespace: 'cars', reducer: 'infinityList' })\nconnectResources({ namespace: 'cars', reducer: myCustomReducer })\n")),Object(r.b)("h3",{id:"object-reducer"},Object(r.b)("inlineCode",{parentName:"h3"},"object")," reducer"),Object(r.b)("p",null,"Merge prev state and action payload"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function objectReducer(state, action){\n  return { ...state, ...action.payload }\n}\n")),Object(r.b)("h3",{id:"none-reducer"},Object(r.b)("inlineCode",{parentName:"h3"},"none")," reducer"),Object(r.b)("p",null,"Do not change store data"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function noneReducer(state, action){\n  return state\n}\n")),Object(r.b)("h3",{id:"replace-reducer"},Object(r.b)("inlineCode",{parentName:"h3"},"replace")," reducer"),Object(r.b)("p",null,"Skip store data and use action payload"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function replaceReducer(state, action){\n  return action.payload\n}\n")),Object(r.b)("h3",{id:"infinitylist-reducer"},Object(r.b)("inlineCode",{parentName:"h3"},"infinityList")," reducer"),Object(r.b)("p",null,"This is the most complex type of reducers that works for endpoint with list data types"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),'{\n  "count": 10,\n  "results": []\n}\n')),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"infinityList")," helpful when you work with infinity List to load next items on scroll to bottom. The basic idea of infinity lists is that when u first enter the page you need to send GET request for first ",Object(r.b)("inlineCode",{parentName:"p"},"n")," rows and on scroll end send one more request to get next batch of data and join 2 array. Next problem is inline editing."),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function infinityListReducer(state, action){\n  return {\n    ...state,\n    ...action.payload,\n    results: [...state.results, ...action.payload.results ]\n  }\n}\n")),Object(r.b)("h3",{id:"custom-reducer-function"},"custom reducer function"),Object(r.b)("p",null,"You may create your own logic for reducer. For example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"function myCustomReducer(state, payload){\n  return { ...state, ... payload, count: state.count + 1 }\n}\nconnectResources({ namespace: 'cars', reducer: myCustomReducer })\n")),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Creating your own reducer, please pay attention to ",Object(r.b)("a",Object(t.a)({parentName:"p"},{href:"https://redux.js.org/style-guide/style-guide"}),"Redux Style Guide")))),Object(r.b)("h3",{id:"baseurl"},"baseURL"),Object(r.b)("p",null,"By default ",Object(r.b)("inlineCode",{parentName:"p"},"API")," module is configured to use the base URL prefix ",Object(r.b)("inlineCode",{parentName:"p"},"/api/"),".\nThat means that you can use an endpoint like ",Object(r.b)("inlineCode",{parentName:"p"},"users")," that will send HTTP requests to ",Object(r.b)("inlineCode",{parentName:"p"},"/api/users")," URL.\nTo change default ",Object(r.b)("inlineCode",{parentName:"p"},"/api/")," value you can use ",Object(r.b)("inlineCode",{parentName:"p"},"baseURL")," config"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"connectResources({ namespace: 'users', endpoint: 'users', baseURL: '/api/v2/' })\n// GET /api/v2/users\n")),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Please check that you add ",Object(r.b)("inlineCode",{parentName:"p"},"/")," at the end of the ",Object(r.b)("inlineCode",{parentName:"p"},"baseURL")," config"),Object(r.b)("p",{parentName:"div"},"Bad"),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"connectResources({ namespace: 'users', endpoint: 'users', baseURL: '/api/v2' })\n\n")),Object(r.b)("p",{parentName:"div"},"Good"),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"connectResources({ namespace: 'users', endpoint: 'users', baseURL: '/api/v2/' })\n\n")))),Object(r.b)("h2",{id:"cache"},"cache"),Object(r.b)("p",null,"Cache module configuration to store API data in storage.\nFor more info, use the ",Object(r.b)("a",Object(t.a)({parentName:"p"},{href:"/docs/cache/resource-cache"}),"link")),Object(r.b)("h2",{id:"transformvalue"},"transformValue"),Object(r.b)("p",null,"Function to modify API responce data before passing to React component and caching"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"import { usePrefetchResource } from '@cranium/resource';\n\nconst resourceConfig = {\n    namespace: 'profile',\n    endpoint: 'users/me',\n    transformValue: (userData) => ({...userData, fullName: `${userData.fistName} ${userData.lastName}` })\n}\n\nfunction MyComponent() {\n    const { data } = usePrefetchResource(resourceConfig)\n}\n")),Object(r.b)("h2",{id:"transformerrors"},"transformErrors"),Object(r.b)("p",null,"Function to modify API responce errors before passing to React component"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"import { usePrefetchResource } from '@cranium/resource';\n\nconst resourceConfig = {\n    namespace: 'profile',\n    endpoint: 'users/me',\n    transformErrors: (erros) => //... modify Errors\n}\n\nfunction MyComponent() {\n    const { data } = usePrefetchResource(resourceConfig)\n}\n")),Object(r.b)("h2",{id:"simple-syntax"},"Simple syntax"),Object(r.b)("p",null,"As you may remember that ",Object(r.b)("inlineCode",{parentName:"p"},"Resource")," object has only 1 required option (namespace), you can use more light syntax to define Resource as a String"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"\n/*\n * same as { namespace: 'cars', endpoint: 'cars' }\n*/\nconnectResources('cars')\n\n\nconnectResources('cars/:uuid') \n\n/*\n * same as { namespace: 'carsSearch', endpoint: 'cars/search' }\n*/\nconnectResources('cars/search')\n\n")))}l.isMDXComponent=!0},169:function(e,n,a){"use strict";a.d(n,"a",(function(){return p})),a.d(n,"b",(function(){return m}));var t=a(0),c=a.n(t);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,c=function(e,n){if(null==e)return{};var a,t,c={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(c[a]=e[a]);return c}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var b=c.a.createContext({}),l=function(e){var n=c.a.useContext(b),a=n;return e&&(a="function"==typeof e?e(n):s({},n,{},e)),a},p=function(e){var n=l(e.components);return c.a.createElement(b.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return c.a.createElement(c.a.Fragment,{},n)}},u=Object(t.forwardRef)((function(e,n){var a=e.components,t=e.mdxType,r=e.originalType,o=e.parentName,b=i(e,["components","mdxType","originalType","parentName"]),p=l(a),u=t,m=p["".concat(o,".").concat(u)]||p[u]||d[u]||r;return a?c.a.createElement(m,s({ref:n},b,{components:a})):c.a.createElement(m,s({ref:n},b))}));function m(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var r=a.length,o=new Array(r);o[0]=u;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:t,o[1]=s;for(var b=2;b<r;b++)o[b]=a[b];return c.a.createElement.apply(null,o)}return c.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);