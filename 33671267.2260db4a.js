(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{117:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return b}));var r=n(1),a=n(6),i=(n(0),n(169)),c={id:"resource_withInfinityList",title:"withInfinityList",sidebar_label:"withInfinityList"},o={id:"resources/resource_withInfinityList",title:"withInfinityList",description:"Function that returns HOC to work with infinity lists. ",source:"@site/docs/resources/withInfinityList.md",permalink:"/bones/docs/resources/resource_withInfinityList",editUrl:"https://github.com/alexgul4enko/bones/tree/master/docs/docs/resources/withInfinityList.md",sidebar_label:"withInfinityList",sidebar:"resourcesSitebar",previous:{title:"withFinalForm",permalink:"/bones/docs/resources/resource_withFinalForm"},next:{title:"useQuery",permalink:"/bones/docs/resources/graphql/usequery"}},s=[{value:"Usage",id:"usage",children:[{value:"<code>loadNext</code>",id:"loadnext",children:[]},{value:"onRefresh",id:"onrefresh",children:[]},{value:"isRefreshing",id:"isrefreshing",children:[]},{value:"onSearch",id:"onsearch",children:[]}]}],l={rightToc:s};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Function that returns HOC to work with infinity lists. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"import { withInfinityList } from '@cranium/resource'\n\nwithInfinityList(resource, options)\n")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"resource")),Object(i.b)("p",null,Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/resources/connect_resource_type"}),"Resource config")," or ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/resources/resource_customresources"}),"Custom Resource")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"options")),Object(i.b)("p",null,"Object with additional configurations. To read more visit this ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/resources/resource_prefetchResources#options"}),"link")," "),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Property"),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"type"),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Default"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/resources/resource_prefetchResources#refresh"}),"refresh")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Boolean"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/resources/resource_prefetchResources#destroyonunmount"}),"destroyOnUnmount")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Boolean"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/resources/resource_prefetchResources#defaultparams"}),"defaultParams")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Object"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"null")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/resources/resource_prefetchResources#loader"}),"Loader")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"React Element"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"method"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"'GET'"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"POST")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"prefetch"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Boolean"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"true")))),Object(i.b)("p",null,"Most configurations are same with ",Object(i.b)("inlineCode",{parentName:"p"},"prefetchResources"),". But here is one new param ",Object(i.b)("inlineCode",{parentName:"p"},"prefetch")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"prefetch")," Boolean flag to configure if ",Object(i.b)("inlineCode",{parentName:"p"},"withInfinityList")," HOC needs to send initial API request."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"//GET /api/users on mount \nimport { withInfinityList } from '@cranium/resource'\n\nexport default withInfinityList( 'users', {\n  prefetch: true\n})(ListView)\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"//DO not send any GET requests on mount initial values are empty or defined with `initialValues` option\nimport { withFinalForm } from '@cranium/resource'\n\nexport default withFinalForm({}, 'users/me', {\n  prefetch: false\n})(FormViewComponent)\n")),Object(i.b)("h2",{id:"usage"},"Usage"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"withInfinityList")," will pass 3 more additional props to your component:"),Object(i.b)("h3",{id:"loadnext"},Object(i.b)("inlineCode",{parentName:"h3"},"loadNext")),Object(i.b)("p",null,"Function that could be used on scroll end.\nThis will automatically increment offset by limit and concatenates previous data with new batch of data."),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"loadNext will only work with ",Object(i.b)("inlineCode",{parentName:"p"},"offset")," ",Object(i.b)("inlineCode",{parentName:"p"},"limit")," pagination type"))),Object(i.b)("h3",{id:"onrefresh"},"onRefresh"),Object(i.b)("p",null,"Function to refresh list data. In most case it is pull down to refresh.\nThis will automatically set offset to 0 and replace previous data in redux with new one"),Object(i.b)("h3",{id:"isrefreshing"},"isRefreshing"),Object(i.b)("p",null,"Boolean indicator that shows if refresh is pending"),Object(i.b)("h3",{id:"onsearch"},"onSearch"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"onSearch(filters)\n")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"onSearch")," function to handle what ever filter requests.\nThis function has debounce 300 to have ability to use it for on air search.\nAlso pending search requests will be terminated on component unmount and each next search request will terminate previous search request."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"import { withInfinityList } from '@cranium/resource'\n\nfunction InfinityListView ({\n  cars,\n  loadNext,\n  onRefresh,\n  isRefreshing,\n  onSearch\n}) {\n  return (\n    <Fragment>\n      <input onChange={(e) => onSearch({ search: e.target.value })}/> //this will automatically setup offset to 0\n      <List\n        data={get(cars, 'data.results', [])}\n        onEndReached={loadNext}\n        onRefresh={onRefresh}\n        refreshing={isRefreshing}\n        renderItem={YourItem}\n        keyExtractor={yourKeyExtractor}\n      />\n    </Fragment>\n  )\n}\n    \nexport default withInfinityList({\n  namespace: 'cars',\n  queries: ['offset', 'limit', 'search']\n})(InfinityListView)\n\n")))}b.isMDXComponent=!0},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),b=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},u=function(e){var t=b(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=b(n),d=r,m=u["".concat(c,".").concat(d)]||u[d]||p[d]||i;return n?a.a.createElement(m,o({ref:t},l,{components:n})):a.a.createElement(m,o({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,c=new Array(i);c[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var l=2;l<i;l++)c[l]=n[l];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);