(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{143:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return s})),r.d(t,"metadata",(function(){return a})),r.d(t,"rightToc",(function(){return u})),r.d(t,"default",(function(){return i}));var n=r(1),c=r(6),o=(r(0),r(159)),s={id:"resource_hooks",title:"Hooks",sidebar_label:"Hooks"},a={id:"resources/resource_hooks",title:"Hooks",description:"## ~~useResource~~",source:"@site/docs/resources/hooks.md",permalink:"/bones/docs/resources/resource_hooks",editUrl:"https://github.com/alexgul4enko/bones/tree/master/docs/docs/resources/hooks.md",sidebar_label:"Hooks",sidebar:"resourcesSitebar",previous:{title:"useGraphInifnyList",permalink:"/bones/docs/resources/graphql/useGraphInifnyList"}},u=[{value:"<del>useResource</del>",id:"useresource",children:[]},{value:"<del>useCustomRequest</del>",id:"usecustomrequest",children:[]},{value:"<del>usePrefetchResource</del>",id:"useprefetchresource",children:[{value:"<del>resource</del>",id:"resource",children:[]},{value:"<del>configs Object</del>",id:"configs-object",children:[]}]},{value:"<del>usePrefetchRequest</del>",id:"useprefetchrequest",children:[{value:"<del>asyncFunction</del>",id:"asyncfunction",children:[]},{value:"<del>resource</del>",id:"resource-1",children:[]},{value:"<del>configs Object</del>",id:"configs-object-1",children:[]}]},{value:"<del>useRequest</del>",id:"userequest",children:[{value:"<del>resource</del>",id:"resource-2",children:[]},{value:"<del>type</del>",id:"type",children:[]}]},{value:"<del>useSetData</del>",id:"usesetdata",children:[]},{value:"<del>useSetErrors</del>",id:"useseterrors",children:[]},{value:"<del>useSetFilters</del>",id:"usesetfilters",children:[]},{value:"<del>useSetLoading</del>",id:"usesetloading",children:[]},{value:"<del>useClear</del>",id:"useclear",children:[]},{value:"<del>useSearch</del>",id:"usesearch",children:[]}],l={rightToc:u};function i(e){var t=e.components,r=Object(c.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"useresource"},Object(o.b)("del",{parentName:"h2"},"useResource")),Object(o.b)("p",null,"Hook that will create resource. The difference from connectResources is that useResource will only accept single ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/bones/docs/resources/connect_resources#resource"}),"Resource")," and return same properties as ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/bones/docs/resources/connect_resources#basic-usage"}),"connectResources")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useResource } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const { data, isLoading,  errors, fetch } = useResource('users/me')\n  useEffect(()=>{\n    const request = fetch() //get data on mount\n    return request.cancel //terminate request on unmount\n  }, [])\n  if(isLoading) {\n    return 'Loading...'\n  }\n  if(errors){\n    return 'Oooops something went wrong please contact local police office'\n  }\n  return <UserElement user={data}/>\n}\n")),Object(o.b)("h2",{id:"usecustomrequest"},Object(o.b)("del",{parentName:"h2"},"useCustomRequest")),Object(o.b)("p",null,"Hook to use custom async fucntion. "),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),"useCustomRequest(asyncFunction, namespace)\n")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useCustomRequest } from '@cranium/resource'\n\nfunction tryAsync(API, payload, meta) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({ love: 'React' })\n    }, 1000)\n  })\n}\n\n\nfunction MyReactComponent () {\n  const { data, isLoading,  errors, request } = useCustomRequest(tryAsync, 'myLove') \n  return <button onClick={()=>request()}>Find your love</button>\n}\n")),Object(o.b)("h2",{id:"useprefetchresource"},Object(o.b)("del",{parentName:"h2"},"usePrefetchResource")),Object(o.b)("p",null,"Same as useResource but it will automatically send request on mount and terminate pending requests on unmount. Also by default it will clear redux store for particular resource on component unmount."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),"usePrefetchResource(resource, configs)\n")),Object(o.b)("h3",{id:"resource"},Object(o.b)("del",{parentName:"h3"},"resource")),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/bones/docs/resources/connect_resources#resource"}),"Resource")," config. Required"),Object(o.b)("h3",{id:"configs-object"},Object(o.b)("del",{parentName:"h3"},"configs ","[Object]")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"configs.filters ","[Object]",". Filters to pass as an argument to prefetch request"),Object(o.b)("li",{parentName:"ul"},'configs.method ("GET" | "POST")'),Object(o.b)("li",{parentName:"ul"},"configs.destroyOnUnmount ","[Boolean]",". Default true. Flag to clear resource on unmount")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"import { usePrefetchResource } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const { data, isLoading,  errors, fetch } = usePrefetchResource('users/me')\n  return <UserElement user={data}/>\n}\n")),Object(o.b)("h2",{id:"useprefetchrequest"},Object(o.b)("del",{parentName:"h2"},"usePrefetchRequest")),Object(o.b)("p",null,"Same as usePrefetchResource in case u need to provide some custom async function on load Component"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),"usePrefetchRequest(asyncFunction, resource, configs)\n")),Object(o.b)("h3",{id:"asyncfunction"},Object(o.b)("del",{parentName:"h3"},"asyncFunction")),Object(o.b)("p",null,"[Function]"," Required. Function that will be invoced on component mount. This function should return Promise. See ",Object(o.b)("del",{parentName:"p"},"useCustomRequest")," for more details"),Object(o.b)("h3",{id:"resource-1"},Object(o.b)("del",{parentName:"h3"},"resource")),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/bones/docs/resources/connect_resources#resource"}),"Resource")," config. Required"),Object(o.b)("h3",{id:"configs-object-1"},Object(o.b)("del",{parentName:"h3"},"configs ","[Object]")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"configs.filters ","[Object]",". Filters to pass as an argument to prefetch request"),Object(o.b)("li",{parentName:"ul"},'configs.method ("GET" | "POST")'),Object(o.b)("li",{parentName:"ul"},"configs.destroyOnUnmount ","[Boolean]",". Default true. Flag to clear resource on unmount")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"import { usePrefetchRequest } from '@cranium/resource'\n\nfunction request(API, data, { endpoint, signal }) {\n  return API.get('profile/me', { signal })\n}\n\nfunction MyReactComponent () {\n  const { data, isLoading,  errors, request } = usePrefetchRequest('users/me')\n  return <UserElement user={data}/>\n}\n")),Object(o.b)("h2",{id:"userequest"},Object(o.b)("del",{parentName:"h2"},"useRequest")),Object(o.b)("p",null,"Hook for async resource action."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),"useRequest(resource, type)\n")),Object(o.b)("h3",{id:"resource-2"},Object(o.b)("del",{parentName:"h3"},"resource")),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/bones/docs/resources/connect_resources#resource"}),"Resource")," config. Required"),Object(o.b)("h3",{id:"type"},Object(o.b)("del",{parentName:"h3"},"type")),Object(o.b)("p",null,"HTTP request type.  Default GET"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"GET"),Object(o.b)("li",{parentName:"ul"},"POST"),Object(o.b)("li",{parentName:"ul"},"PUT"),Object(o.b)("li",{parentName:"ul"},"DELETE"),Object(o.b)("li",{parentName:"ul"},"PATCH"),Object(o.b)("li",{parentName:"ul"},"UPDATE\n...")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useRequest } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const fetchUser = useRequest({ endpoint: 'users/me', namespace: 'session'}) \n  return <button onClick={()=>fetchUser()}>Refresh profile</button>\n}\n")),Object(o.b)("h2",{id:"usesetdata"},Object(o.b)("del",{parentName:"h2"},"useSetData")),Object(o.b)("p",null,"Hook that will return resource setData action ",Object(o.b)("inlineCode",{parentName:"p"},"useSetData(namespace)")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useSetData } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const setData = useSetData('session') \n  return <button onClick={()=>setData(null)}>clear data</button>\n}\n")),Object(o.b)("h2",{id:"useseterrors"},Object(o.b)("del",{parentName:"h2"},"useSetErrors")),Object(o.b)("p",null,"Hook that will return resource setErrors action ",Object(o.b)("inlineCode",{parentName:"p"},"useSetErrors(namespace)")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useSetErrors } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const setErrors = useSetErrors('session') \n  return <button onClick={()=>setErrors(null)}>clear errors</button>\n}\n")),Object(o.b)("h2",{id:"usesetfilters"},Object(o.b)("del",{parentName:"h2"},"useSetFilters")),Object(o.b)("p",null,"Hook that will return resource setFilters action ",Object(o.b)("inlineCode",{parentName:"p"},"useSetFilters(namespace)")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useSetFilters } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const setFilters = useSetFilters('session') \n  return <button onClick={()=>setFilters({ offset: 2 })}>setFilters</button>\n}\n")),Object(o.b)("h2",{id:"usesetloading"},Object(o.b)("del",{parentName:"h2"},"useSetLoading")),Object(o.b)("p",null,"Hook that will return resource setLoading action ",Object(o.b)("inlineCode",{parentName:"p"},"useSetLoading(namespace)")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useSetLoading } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const setLoading = useSetLoading('session') \n  return <button onClick={setLoading}>toggle loading</button>\n}\n")),Object(o.b)("h2",{id:"useclear"},Object(o.b)("del",{parentName:"h2"},"useClear")),Object(o.b)("p",null,"Hook that will return resource clear action ",Object(o.b)("inlineCode",{parentName:"p"},"useClear(namespace)")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useClear } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const clear = useClear('session') \n  return <button onClick={clear}>Log out</button>\n}\n")),Object(o.b)("h2",{id:"usesearch"},Object(o.b)("del",{parentName:"h2"},"useSearch")),Object(o.b)("p",null,"Hook that will create search fucntion.\n1. debounce\n2. terminate previous request before sending new request\n3. terminate request on unmount"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { useSearch } from '@cranium/resource'\n\nuseSearch(searchFunction, timeout)\n")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource, useSearch } from '@cranium/resource'\n\nfunction MyReactComponent () {\n  const { data, isLoading,  errors, fetch } = useResource('users/me')\n  const search = useSearch(fetch)\n  return <SearchInput search={search}/>\n}\n")))}i.isMDXComponent=!0},159:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return m}));var n=r(0),c=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var l=c.a.createContext({}),i=function(e){var t=c.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a({},t,{},e)),r},b=function(e){var t=i(e.components);return c.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),b=i(r),d=n,m=b["".concat(s,".").concat(d)]||b[d]||p[d]||o;return r?c.a.createElement(m,a({ref:t},l,{components:r})):c.a.createElement(m,a({ref:t},l))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=d;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a.mdxType="string"==typeof e?e:n,s[1]=a;for(var l=2;l<o;l++)s[l]=r[l];return c.a.createElement.apply(null,s)}return c.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);