(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{126:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return o})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return l}));var a=t(1),r=t(6),s=(t(0),t(169)),c={id:"use-resource-usage",title:"useResource",sidebar_label:"useResource (usage)"},o={id:"resources/hooks/use-resource-usage",title:"useResource",description:"# useResource",source:"@site/docs/resources/hooks/use-resource-actions.md",permalink:"/bones/docs/resources/hooks/use-resource-usage",editUrl:"https://github.com/alexgul4enko/bones/tree/master/docs/docs/resources/hooks/use-resource-actions.md",sidebar_label:"useResource (usage)",sidebar:"resourcesSitebar",previous:{title:"useResource",permalink:"/bones/docs/resources/hooks/use-resource"},next:{title:"usePrefetchResource",permalink:"/bones/docs/resources/hooks/use-prefetch-resource"}},i=[{value:"Basic usage",id:"basic-usage",children:[]},{value:"GET request",id:"get-request",children:[]},{value:"OPTIONS request",id:"options-request",children:[]},{value:"DELETE request",id:"delete-request",children:[]},{value:"POST request",id:"post-request",children:[{value:"type application/json",id:"type-applicationjson",children:[]},{value:"type formdata",id:"type-formdata",children:[]},{value:"Dynamic URL and query params",id:"dynamic-url-and-query-params",children:[]}]},{value:"PATCH request",id:"patch-request",children:[]},{value:"PUT request",id:"put-request",children:[]},{value:"Request with dynamic URL",id:"request-with-dynamic-url",children:[]},{value:"Request with query params",id:"request-with-query-params",children:[]},{value:"Modify data",id:"modify-data",children:[]},{value:"Modify loading",id:"modify-loading",children:[]},{value:"Modify errors",id:"modify-errors",children:[]},{value:"Modify filters",id:"modify-filters",children:[]},{value:"Clear data on unmount",id:"clear-data-on-unmount",children:[]},{value:"Change resource configs",id:"change-resource-configs",children:[{value:"fetch config",id:"fetch-config",children:[]},{value:"remove config",id:"remove-config",children:[]},{value:"create config",id:"create-config",children:[]},{value:"setData config",id:"setdata-config",children:[]},{value:"clear another resource",id:"clear-another-resource",children:[]}]},{value:"terminate requests",id:"terminate-requests",children:[]}],u={rightToc:i};function l(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(a.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"useresource"},"useResource"),Object(s.b)("p",null,"Basic hook for sending REST API from within React Component. "),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"useResource( config: ResourceConfig )\n")),Object(s.b)("h2",{id:"basic-usage"},"Basic usage"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const {\n        data,            // body from success HTTP request\n        isLoading,       // boolean flag that fill be automatically toggle while using fetch|fetchOptions|create|update|remove actions\n        options,         // body from success OPTIONS HTTP request\n        errors,          // errors from HTTP request\n        filters,         // JSON representation of query string\n        // async actions\n        fetch,           // action to send GET HTTP request\n        fetchOptions,    // action to send OPTIONS HTTP request\n        create,          // action to send POST HTTP request\n        replace,         // action to send PUT HTTP request\n        update,          // action to send PATCH HTTP request\n        remove,          // action to send DELETE HTTP request \n        // sync actions\n        setData,         // action to change data\n        setLoading,      // action to toggle loading flag\n        setErrors,       // action to change errors\n        setFilters,      // action to change filters\n        clear,           // action to delete all resource:  data,isLoading,options,errors,filters\n    } = useResource(resourceConfig)\n}\n")),Object(s.b)("h2",{id:"get-request"},"GET request"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { data, isLoading, errors, fetch } = useResource(resourceConfig)\n    //send GET /api/users Request on mount\n    useEffect(() => { fetch() },[])\n    if(isLoading){\n        return <p>Loading</p>\n    }\n    if(errors){\n        return <p>Oooops...</p>\n    }\n    if(data) {\n        return <p>{data}</p>\n    }\n}\n")),Object(s.b)("h2",{id:"options-request"},"OPTIONS request"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\n\nfunction MyReactComponent () {\n    const { options, isLoading, errors, fetchOptions } = useResource(resourceConfig)\n    //send OPTIONS /api/users Request on mount\n    useEffect(() => { fetchOptions() },[])\n    if(isLoading){\n        return <p>Loading</p>\n    }\n    if(errors){\n        return <p>Oooops...</p>\n    }\n    if(options) {\n        return <p>{options}</p>\n    }\n}\n")),Object(s.b)("h2",{id:"delete-request"},"DELETE request"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users/:uuid',\n}\n\nfunction MyReactComponent () {\n    const { isLoading, errors, remove } = useResource(resourceConfig)\n    const deleteUser = useCallback(()=>{ \n        // DETETE /api/users/21\n        remove({ uuid: 21 })\n            //handle success\n            .then(() => alert('success'))\n            ////handle errors\n            .catch((error) => alert(error))\n    },[remove])\n\n    return (\n        <>\n            <button\n                onClick={deleteUser}\n                //disable button while sending HTTP Request\n                disabled={isLoading}\n            >\n                Delete\n            </button>\n            //show errors\n            {errors && <p>{errors}</p>}\n        </>\n    )\n}\n")),Object(s.b)("h2",{id:"post-request"},"POST request"),Object(s.b)("h3",{id:"type-applicationjson"},"type application/json"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\n\nfunction MyReactComponent () {\n    const { isLoading, errors, create } = useResource(resourceConfig)\n\n    const handleSubmit = useCallback((event)=>{ \n        event.preventDefault()\n        const formdata = new FormData(event.target);\n        //POST /api/users\n        create({\n            email: data.get('email'),\n            password: data.get('email'),\n        })\n            //handle success\n            .then(() => alert('success'))\n            ////handle errors\n            .catch((error) => alert(error))\n    },[create])\n\n    return (\n        <>\n            <form onSubmit={handleSubmit}>\n                <input name=\"email\"/>\n                <input name=\"password\"/>\n                <button type=\"submit\" disabled={isLoading}>Submit</button>\n                <button type=\"reset\" disabled={isLoading}>Reset</button>\n                {errors && <p>{errors}</p>}\n            </form>\n        </>\n    )\n}\n")),Object(s.b)("h3",{id:"type-formdata"},"type formdata"),Object(s.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"Please note, that in case there is an instance of File in your request payload, ",Object(s.b)("inlineCode",{parentName:"p"},"resource")," module will automatically converd Request body to Formdata."))),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'avatar',\n    endpoint: '/image-upload',\n}\n\nfunction MyReactComponent () {\n    const [value, setValue] = useState()\n    const { isLoading, errors, create } = useResource(resourceConfig)\n\n    const handleChange = useCallback((event) => setValue(event.target.value))\n\n    const handleSubmit = useCallback((event)=>{ \n        event.preventDefault()\n        //POST /api/image-upload\n        create({ file: value })\n            //handle success\n            .then(() => alert('success'))\n            ////handle errors\n            .catch((error) => alert(error))\n    },[create, value])\n\n    return (\n        <>\n            <form onSubmit={handleSubmit}>\n                <input name=\"email\" type=\"file\" onChange={handleChange} value={value}/>\n                <button type=\"submit\" disabled={isLoading}>Submit</button>\n                <button type=\"reset\" disabled={isLoading}>Reset</button>\n                {errors && <p>{errors}</p>}\n            </form>\n        </>\n    )\n}\n")),Object(s.b)("h3",{id:"dynamic-url-and-query-params"},"Dynamic URL and query params"),Object(s.b)("p",null,"You can pass the ",Object(s.b)("inlineCode",{parentName:"p"},"filters")," object as a second argument in ",Object(s.b)("inlineCode",{parentName:"p"},"create"),", ",Object(s.b)("inlineCode",{parentName:"p"},"update"),",  ",Object(s.b)("inlineCode",{parentName:"p"},"replace")," actions to send API with dynamic URL and query params"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users/:city',\n}\n\nfunction MyReactComponent () {\n    const { isLoading, errors, create } = useResource(resourceConfig)\n\n    const createUser = useCallback(() => {\n        //Post /api/users/NY?galaxy=FG-123 body: { name: 'Avatar' }\n        create(\n            //POST request body\n            { name: 'Avatar' },\n            {\n                filters: {\n                    //URL param\n                    city: 'NY',\n                    //Query param\n                    galaxy: 'FG-123'\n                }\n            }\n        )\n    }, [create])\n\n    return ( <button onClick={createUser}>Create user</button>)\n}\n")),Object(s.b)("h2",{id:"patch-request"},"PATCH request"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users/:uuid',\n}\n\nfunction MyReactComponent () {\n    const { isLoading, errors, update } = useResource(resourceConfig)\n\n    const handleSubmit = useCallback((event)=>{ \n        event.preventDefault()\n        const formdata = new FormData(event.target);\n        //PATCH /api/users/23\n        update({ email: data.get('email'), uuid: 23 })\n            //handle success\n            .then(() => alert('success'))\n            ////handle errors\n            .catch((error) => alert(error))\n    },[update])\n\n    return (\n        <>\n            <form onSubmit={handleSubmit}>\n                <input name=\"email\"/>\n                <button type=\"submit\" disabled={isLoading}>Submit</button>\n                <button type=\"reset\" disabled={isLoading}>Reset</button>\n                {errors && <p>{errors}</p>}\n            </form>\n        </>\n    )\n}\n")),Object(s.b)("h2",{id:"put-request"},"PUT request"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users/:uuid',\n}\n\nfunction MyReactComponent () {\n    const { isLoading, errors, replace } = useResource(resourceConfig)\n\n    const handleSubmit = useCallback((event)=>{ \n        event.preventDefault()\n        const formdata = new FormData(event.target);\n        //PUT /api/users/23\n        replace({ email: data.get('email'), uuid: 23 })\n            //handle success\n            .then(() => alert('success'))\n            ////handle errors\n            .catch((error) => alert(error))\n    },[replace])\n\n    return (\n        <>\n            <form onSubmit={handleSubmit}>\n                <input name=\"email\"/>\n                <button type=\"submit\" disabled={isLoading}>Submit</button>\n                <button type=\"reset\" disabled={isLoading}>Reset</button>\n                {errors && <p>{errors}</p>}\n            </form>\n        </>\n    )\n}\n")),Object(s.b)("h2",{id:"request-with-dynamic-url"},"Request with dynamic URL"),Object(s.b)("p",null,"You can use dynamic URL sintax to specify API endpoint."),Object(s.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"After each API call ",Object(s.b)("inlineCode",{parentName:"p"},"resource")," module will store URL params from the latest API call in ",Object(s.b)("inlineCode",{parentName:"p"},"filters")," object"))),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'cars',\n    // dynamic URL where model is required and action is optional\n    endpoint: '/cars/:model/:action?',\n}\nfunction MyReactComponent () {\n    const { fetch, create, filters } = useResource(resourceConfig)\n\n    //GET '/api/cars/cactus'\n    useCallback(() => fetch({ model: 'cactus' }))\n\n    //GET '/api/cars/cactus/buy'\n    useCallback(() => fetch({ model: 'cactus', action: 'buy' }))\n\n    //POST '/api/cars/cactus' { price: 12000 }\n    useCallback(() => create({ model: 'cactus', price: 12000 }))\n\n    //POST '/api/cars/cactus/sell' { price: 16000 }\n    useCallback(() => create({ model: 'cactus', action: 'sell' price: 16000 }))\n\n    return {\n        <>\n            <p>URL params requests</p>\n            <p>{JSON.stringify(filters)}</p>\n        </>\n    }\n}\n")),Object(s.b)("h2",{id:"request-with-query-params"},"Request with query params"),Object(s.b)("div",{className:"admonition admonition-info alert alert--info"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"To send HTTP requests with query params you need to define all possible queries that will be used using ",Object(s.b)("inlineCode",{parentName:"p"},"queries")," configuration"))),Object(s.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"All other data that is not described in ",Object(s.b)("inlineCode",{parentName:"p"},"queries")," resourceConfig will be omited"))),Object(s.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"After each API call ",Object(s.b)("inlineCode",{parentName:"p"},"resource")," module will store query params from the latest API call in ",Object(s.b)("inlineCode",{parentName:"p"},"filters")," object"))),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'globalData',\n    endpoint: 'context',\n    queries: ['accountId', 'keys']\n}\nfunction MyReactComponent () {\n    const { fetch, create, filters } = useResource(resourceConfig)\n\n    //GET /api/context\n    useCallback(() => fetch())\n\n    //GET /api/context?accountId=14\n    useCallback(() => fetch({ accountId: 14 }))\n\n    //GET /api/context?accountId=14&keys=PERMISSIONS\n    useCallback(() => fetch({ accountId: 14, keys: 'PERMISSIONS' }))\n\n    //GET /api/context?accountId=14&keys=PERMISSIONS,ROLES\n    useCallback(() => fetch({ accountId: 14, keys: ['PERMISSIONS', 'ROLES'] }))\n\n    //GET /api/context\n    useCallback(() => create({ missed: 'test', price: 0 }))\n\n    return {\n        <>\n            <p>Filters from latest requests</p>\n            <p>{JSON.stringify(filters)}</p>\n        </>\n    }\n\n}\n")),Object(s.b)("h2",{id:"modify-data"},"Modify data"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { data, setData } = useResource(resourceConfig)\n    // modify data\n    useCallback(() => setData({ test: 'data'}))\n    useCallback(() => setData('Test'))\n    useCallback(() => setData(null))\n    useCallback(() => setData(false))\n}\n")),Object(s.b)("h2",{id:"modify-loading"},"Modify loading"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { isLoading, setLoading } = useResource(resourceConfig)\n    // modify isLoading\n    useCallback(() => setLoading(true))\n    useCallback(() => setLoading(false))\n}\n")),Object(s.b)("h2",{id:"modify-errors"},"Modify errors"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { errors, setErrors } = useResource(resourceConfig)\n    // modify errors\n    useCallback(() => setErrors({ test: 'data'}))\n    useCallback(() => setErrors('Test'))\n    useCallback(() => setErrors(null))\n    useCallback(() => setErrors(false))\n}\n")),Object(s.b)("h2",{id:"modify-filters"},"Modify filters"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { filters, setFilters } = useResource(resourceConfig)\n    // modify filters\n    useCallback(() => setFilters({ test: 'data'}))\n    useCallback(() => setFilters('Test'))\n    useCallback(() => setFilters(null))\n    useCallback(() => setFilters(false))\n}\n")),Object(s.b)("h2",{id:"clear-data-on-unmount"},"Clear data on unmount"),Object(s.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},Object(s.b)("inlineCode",{parentName:"p"},"resource")," module uses Redux global state managment. When you call some action for the first time it will create new item in Redux store with key that is equal to ",Object(s.b)("inlineCode",{parentName:"p"},"namespace")," from resourceConfig. So that it is hight recomended to clear you Component data on unmount to keep global store clean."))),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { fetch, clear } = useResource(resourceConfig)\n    \n    useEffect(()=>{\n        //GET /api/users on Mount\n        fetch()\n        // clear users data on unmount\n        return clear\n    },[])\n}\n")),Object(s.b)("h2",{id:"change-resource-configs"},"Change resource configs"),Object(s.b)("p",null,"It is required to pass initial configuration to ",Object(s.b)("inlineCode",{parentName:"p"},"resource")," module, but it is just initial, default config and you can change it."),Object(s.b)("h3",{id:"fetch-config"},"fetch config"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { fetch } = useResource(resourceConfig)\n    //GET /api/users\n    const getUsers = useCallback(() => fetch())\n    //GET /api/users/12 and change current resource data\n    const getUsers = useCallback(() => fetch({ uuid: 12 }, { endpoint: '/users/:uuid' }))\n    //GET /api/users/12 and change another resource data\n    const getUsers = useCallback(() => fetch({ uuid: 12 }, { endpoint: '/users/:uuid', namespace: 'profile' }))\n}\n")),Object(s.b)("h3",{id:"remove-config"},"remove config"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { remove } = useResource(resourceConfig)\n    //DELETE /api/users\n    const deleteUser = useCallback(() => remove())\n    //DELETE /api/users/12\n    const deleteUser = useCallback(() => remove({ uuid: 12 }, { endpoint: '/users/:uuid', reducer: 'none' }))\n    //DELETE /api/v2/users/12 and change another resource data\n    const deleteUser = useCallback(() => remove({ uuid: 12 }, { endpoint: '/users/:uuid', namespace: 'profile', baseUrl: '/api/v2/' }))\n}\n")),Object(s.b)("h3",{id:"create-config"},"create config"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const { remove } = useResource(resourceConfig)\n    //POST /api/users\n    const createUser = useCallback(() => create({ name: 'Alex' }))\n    //POST /api/users/12\n    const createUser = useCallback(() => remove({ uuid: 12, name: 'Alex' }, { endpoint: '/users/:uuid' }))\n    //POST /api/v2/users/12 and change another resource data\n    const createUser = useCallback(() => remove({ uuid: 12, name: 'Alex' }, { endpoint: '/users/:uuid', namespace: 'profile', baseUrl: '/api/v2/' }))\n}\n")),Object(s.b)("h3",{id:"setdata-config"},"setData config"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n}\n\nfunction MyReactComponent () {\n    const { data, setData } = useResource(resourceConfig)\n    //change current resource data\n    const setUsers = useCallback(() => setData([{ name: 'Alex' }]))\n    //change \"profile\" resource data, current data will not changed\n    const setUsers = useCallback(() => setData({ name: 'Alex' }, { namespace: 'profile' }))\n    //change \"profile\" resource data, current data will not changed (simple syntax)\n    const setUsers = useCallback(() => remove({ name: 'Alex' }, 'profile'))\n    //change \"profile\" resource data, current data will not changed\n    const setUsers = useCallback(() => remove({ name: 'Alex' }, { namespace: 'profile', reducer: 'object' }))\n}\n")),Object(s.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(s.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(s.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"Same syntax will be for ",Object(s.b)("inlineCode",{parentName:"p"},"setLoading"),", ",Object(s.b)("inlineCode",{parentName:"p"},"setErrors"),", ",Object(s.b)("inlineCode",{parentName:"p"},"setFilters")))),Object(s.b)("h3",{id:"clear-another-resource"},"clear another resource"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n}\n\nfunction MyReactComponent () {\n    const { clear } = useResource(resourceConfig)\n    //clear current resource\n    const clearResource = useCallback(() => clear())\n    //clear current \"profile\" resource\n    const clearResource = useCallback(() => clear('profile'))\n}\n")),Object(s.b)("h2",{id:"terminate-requests"},"terminate requests"),Object(s.b)("p",null,"By default all async actions (fetch, fetchOptions, create, replace, update, remove ) will return Promise with 1 more method ",Object(s.b)("inlineCode",{parentName:"p"},"cancel"),". You can use this method to abort HHTP requests"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"{16,17}","{16,17}":!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users'\n}\n\nfunction MyReactComponent () {\n    const { fetch } = useResource(resourceConfig)\n    \n    useEffect(()=>{\n        const request = fetch()\n        fetch\n            .then(()=>alert('success'))\n            .catch(()=>alert('error'))\n        //abort HHTP request on unmount\n        return () => request.cancel()\n    },[])\n}\n")))}l.isMDXComponent=!0},169:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return m}));var a=t(0),r=t.n(a);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=r.a.createContext({}),l=function(e){var n=r.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o({},n,{},e)),t},d=function(e){var n=l(e.components);return r.a.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},b=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=l(t),b=a,m=d["".concat(c,".").concat(b)]||d[b]||p[b]||s;return t?r.a.createElement(m,o({ref:n},u,{components:t})):r.a.createElement(m,o({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,c=new Array(s);c[0]=b;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var u=2;u<s;u++)c[u]=t[u];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);