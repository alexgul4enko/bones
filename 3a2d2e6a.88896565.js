(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{122:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return l}));var a=n(1),r=n(6),c=(n(0),n(169)),s={id:"use-resource",title:"useResource",sidebar_label:"useResource (configs)"},o={id:"resources/hooks/use-resource",title:"useResource",description:"# useResource",source:"@site/docs/resources/hooks/use-resource.md",permalink:"/bones/docs/resources/hooks/use-resource",editUrl:"https://github.com/alexgul4enko/bones/tree/master/docs/docs/resources/hooks/use-resource.md",sidebar_label:"useResource (configs)",sidebar:"resourcesSitebar",previous:{title:"TypeScript",permalink:"/bones/docs/resources/resource_ts"},next:{title:"useResource",permalink:"/bones/docs/resources/hooks/use-resource-usage"}},i=[{value:"namespace",id:"namespace",children:[]},{value:"endpoint",id:"endpoint",children:[{value:"Static url",id:"static-url",children:[]},{value:"Dynamic url",id:"dynamic-url",children:[]}]},{value:"baseURL",id:"baseurl",children:[]},{value:"queries",id:"queries",children:[]},{value:"cache",id:"cache",children:[]},{value:"transformValue",id:"transformvalue",children:[]},{value:"transformErrors",id:"transformerrors",children:[]},{value:"forceUpdates",id:"forceupdates",children:[]},{value:"reducer",id:"reducer",children:[{value:"<code>object</code> reducer",id:"object-reducer",children:[]},{value:"<code>none</code> reducer",id:"none-reducer",children:[]},{value:"<code>replace</code> reducer",id:"replace-reducer",children:[]},{value:"<code>infinityList</code> reducer",id:"infinitylist-reducer",children:[]},{value:"custom reducer function",id:"custom-reducer-function",children:[]}]}],u={rightToc:i};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"useresource"},"useResource"),Object(c.b)("p",null,"Basic hook for sending REST API from within React Component. "),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"useResource( config: ResourceConfig )\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: '/users',\n}\nfunction MyReactComponent () {\n    const {\n        data,            // body from success HTTP request\n        isLoading,       // boolean flag that fill be automatically toggle while using fetch|fetchOptions|create|update|remove actions\n        options,         // body from success OPTIONS HTTP request\n        errors,          // errors from HTTP request\n        filters,         // JSON representation of query string\n        // async actions\n        fetch,           // action to send GET HTTP request\n        fetchOptions,    // action to send OPTIONS HTTP request\n        create,          // action to send POST HTTP request\n        replace,         // action to send PUT HTTP request\n        update,          // action to send PATCH HTTP request\n        remove,          // action to send DELETE HTTP request \n        // sync actions\n        setData,         // action to change data\n        setLoading,      // action to toggle loading flag\n        setErrors,       // action to change errors\n        setFilters,      // action to change filters\n        clear,           // action to delete all resource:  data,isLoading,options,errors,filters\n    } = useResource(resourceConfig)\n}\n")),Object(c.b)("h2",{id:"namespace"},"namespace"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"resource")," module uses Redux global state managment. When you call some action for the first time it will create new item in Redux store with key that is equal to ",Object(c.b)("inlineCode",{parentName:"p"},"namespace"),"."),Object(c.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Please pay attantion that ",Object(c.b)("inlineCode",{parentName:"p"},"namespace")," should be some unique miningfull variable. In case you will use same ",Object(c.b)("inlineCode",{parentName:"p"},"namespace")," for all your configurations it will just override each other"))),Object(c.b)("p",null,"When you first open application Redux store is empty"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="redux store"',title:'"redux','store"':!0}),"{}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="first component to render"',title:'"first',component:!0,to:!0,'render"':!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'myAppData',\n}\nfunction APP () {\n    const { filters, setData } = useResource(resourceConfig)\n    // create myAppData resource on mount\n    useEffect(() => setData({ test: 'data' }), [])\n    return <User/>\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="redux store"',title:'"redux','store"':!0}),"{\n    myAppData: {\n        test: 'data'\n    }\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="second compoent to Render"',title:'"second',compoent:!0,to:!0,'Render"':!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'user',\n}\nfunction User () {\n    const { filters, setData , setLoading, setErrors, setFilters} = useResource(resourceConfig)\n    // create user resource on mount\n    useEffect(() => {\n        setData({ name: 'Alex' })\n        setLoading(true)\n        setErrors('no errors')\n        setFilters({ some: 'filters' })\n    }, [])\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'{7-16} title="redux store"',"{7-16}":!0,title:'"redux','store"':!0}),"{\n    myAppData: {\n        data: {\n            test: 'data'\n        }\n    },\n    user: {\n        data: {\n            name: 'Alex'\n        },\n        isLoading: true,\n        errors: 'no errors',\n        filters: {\n            some: 'filters'\n        }\n    }\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:'{14} title="second compoent add clear data"',"{14}":!0,title:'"second',compoent:!0,add:!0,clear:!0,'data"':!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'user',\n}\nfunction User () {\n    const { filters, setData , setLoading, setErrors, setFilters, clear } = useResource(resourceConfig)\n    // create user resource on mount\n    useEffect(() => {\n        setData({ name: 'Alex' })\n        setLoading(true)\n        setErrors('no errors')\n        setFilters({ some: 'filters' })\n        return clear\n    }, [])\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="redux store"',title:'"redux','store"':!0}),"{\n    myAppData: {\n        data: {\n            test: 'data'\n        }\n    }\n}\n")),Object(c.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"You can use short Synax of Resource config"),Object(c.b)("pre",{parentName:"div"},Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"useResource({ namespace: 'user' })\n")),Object(c.b)("p",{parentName:"div"},"is same as "),Object(c.b)("pre",{parentName:"div"},Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"useResource('user')\n")))),Object(c.b)("h2",{id:"endpoint"},"endpoint"),Object(c.b)("p",null,"Resource configuration to setup API URL so send HHTP requests"),Object(c.b)("h3",{id:"static-url"},"Static url"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:"{5}","{5}":!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: 'users'\n}\nfunction APP () {\n    const { fetch, create } = useResource(resourceConfig)\n    // GET /api/users\n    useCallback(() => fetch())\n\n    // POST /api/users\n    useCallback(() => create())\n}\n")),Object(c.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"You can use short Synax of Resource config"),Object(c.b)("pre",{parentName:"div"},Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: 'users'\n}\n\nuseResource(resourceConfig)\n")),Object(c.b)("p",{parentName:"div"},"is same as "),Object(c.b)("pre",{parentName:"div"},Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"useResource('users')\n")))),Object(c.b)("h3",{id:"dynamic-url"},"Dynamic url"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:"{5}","{5}":!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: 'users/:deparment/:office?'\n}\n\nfunction APP () {\n    const { fetch } = useResource(resourceConfig)\n    // GET /api/users/developers\n    useCallback(() => fetch({ deparment: 'developers' }))\n\n    // GET /api/users/developers/UK\n    useCallback(() => fetch({ deparment: 'developers', office: 'UK' }))\n}\n")),Object(c.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"You can use short Synax of Resource config"),Object(c.b)("pre",{parentName:"div"},Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: 'users/:deparment/:office?'\n}\n\nuseResource(resourceConfig)\n")),Object(c.b)("p",{parentName:"div"},"is same as "),Object(c.b)("pre",{parentName:"div"},Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"useResource('users/:deparment/:office?')\n")))),Object(c.b)("h2",{id:"baseurl"},"baseURL"),Object(c.b)("p",null,"By default resource module will automatically appent ",Object(c.b)("inlineCode",{parentName:"p"},"/api/")," prefix to all endpoints"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:"{5,9}","{5,9}":!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: 'users'\n}\nfunction APP () {\n    const { fetch, create } = useResource(resourceConfig)\n    // GET /api/users\n    useCallback(() => fetch())\n}\n")),Object(c.b)("p",null,"To change this behavior use ",Object(c.b)("inlineCode",{parentName:"p"},"baseURL")," config"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx",metastring:"{6,10}","{6,10}":!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'users',\n    endpoint: 'users',\n    baseURL: '/'\n}\nfunction APP () {\n    const { fetch, create } = useResource(resourceConfig)\n    // GET /users\n    useCallback(() => fetch())\n}\n")),Object(c.b)("h2",{id:"queries"},"queries"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"queries")," is an Array of all posible query params that aceepts current endpoint"),Object(c.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"All other params that is not described in ",Object(c.b)("inlineCode",{parentName:"p"},"queries")," resourceConfig will be omited from queryString"))),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"After each API call ",Object(c.b)("inlineCode",{parentName:"p"},"resource")," module will store query params from the latest API call in ",Object(c.b)("inlineCode",{parentName:"p"},"filters")," object"))),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"{6}","{6}":!0}),"import { useResource } from '@cranium/resource'\n\nconst resourceConfig = {\n    namespace: 'globalData',\n    endpoint: 'context',\n    queries: ['accountId', 'keys']\n}\nfunction MyReactComponent () {\n    const { fetch, create, filters } = useResource(resourceConfig)\n\n    //GET /api/context\n    useCallback(() => fetch())\n\n    //GET /api/context?accountId=14\n    useCallback(() => fetch({ accountId: 14 }))\n\n    //GET /api/context?accountId=14&keys=PERMISSIONS\n    useCallback(() => fetch({ accountId: 14, keys: 'PERMISSIONS' }))\n\n    //GET /api/context?accountId=14&keys=PERMISSIONS,ROLES\n    useCallback(() => fetch({ accountId: 14, keys: ['PERMISSIONS', 'ROLES'] }))\n\n    //GET /api/context\n    useCallback(() => create({ missed: 'test', price: 0 }))\n\n    return {\n        <>\n            <p>Filters from latest requests</p>\n            <p>{JSON.stringify(filters)}</p>\n        </>\n    }\n\n}\n")),Object(c.b)("h2",{id:"cache"},"cache"),Object(c.b)("p",null,"Cache module configuration to store API data in storage."),Object(c.b)("p",null,"For more info, use the ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/cache/resource-cache"}),"link")),Object(c.b)("h2",{id:"transformvalue"},"transformValue"),Object(c.b)("p",null,"Function to modify API responce data before passing to React component and caching."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:"{6,7}","{6,7}":!0}),"import { useResource } from '@cranium/resource';\n\nconst resourceConfig = {\n    namespace: 'profile',\n    endpoint: 'users/me',\n    // modify API responce before passing props to react and caching\n    transformValue: (userData) => ({...userData, fullName: `${userData.fistName} ${userData.lastName}` })\n}\n\nfunction MyComponent() {\n    const { data } = useResource(resourceConfig)\n}\n")),Object(c.b)("h2",{id:"transformerrors"},"transformErrors"),Object(c.b)("p",null,"Function to modify API responce errors before passing to React component"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:"{6,7}","{6,7}":!0}),"import { useResource } from '@cranium/resource';\n\nconst resourceConfig = {\n    namespace: 'profile',\n    endpoint: 'users/me',\n    // modify API errors before passing it to react component\n    transformErrors: (erros) => ({error: erros.message})\n}\n\nfunction MyComponent() {\n    const { data } = useResource(resourceConfig)\n}\n")),Object(c.b)("h2",{id:"forceupdates"},"forceUpdates"),Object(c.b)("p",null,"Default work flow for async actions like (fetch, create, delete, update...) is:"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"Call async action from react Component"),Object(c.b)("li",{parentName:"ol"},"Set ",Object(c.b)("inlineCode",{parentName:"li"},"isLoading")," true, save url and query params to ",Object(c.b)("inlineCode",{parentName:"li"},"filters")),Object(c.b)("li",{parentName:"ol"},"Send HTTP request"),Object(c.b)("li",{parentName:"ol"},"Save data/errors on respoce, Set ",Object(c.b)("inlineCode",{parentName:"li"},"isLoading")," false")),Object(c.b)("p",null,"You can omit changing ",Object(c.b)("inlineCode",{parentName:"p"},"isLoading"),", ",Object(c.b)("inlineCode",{parentName:"p"},"errors")," and ",Object(c.b)("inlineCode",{parentName:"p"},"filters")," data by setting ",Object(c.b)("inlineCode",{parentName:"p"},"forceUpdates")," to ",Object(c.b)("inlineCode",{parentName:"p"},"true"),", so that only ",Object(c.b)("inlineCode",{parentName:"p"},"data")," will be changing.\nMost common case for this configuration is when you use some react npm packages to work with form. In most cases that libraries provides it own handles for submitting and errors so that you can use this config for better performance and to avoid dublicated indicators"),Object(c.b)("h2",{id:"reducer"},"reducer"),Object(c.b)("p",null,"Function that will be called in ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://redux.js.org/basics/reducers"}),"redux reducer"),". Default ",Object(c.b)("inlineCode",{parentName:"p"},"'replace'"),".\nBy default connect resources has already defined 4 types of most reusable reducers.\nAnd you may use it as a String."),Object(c.b)("p",null,"Or you can create your own reducer and pass is as a function"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"useResource({ namespace: 'cars', reducer: 'object' })\nuseResource({ namespace: 'cars', reducer: 'none' })\nuseResource({ namespace: 'cars', reducer: 'replace' })\nuseResource({ namespace: 'cars', reducer: 'infinityList' })\nuseResource({ namespace: 'cars', reducer: myCustomReducer })\n")),Object(c.b)("h3",{id:"object-reducer"},Object(c.b)("inlineCode",{parentName:"h3"},"object")," reducer"),Object(c.b)("p",null,"Merge prev state and action payload"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function objectReducer(state, action){\n  return { ...state, ...action.payload }\n}\n")),Object(c.b)("h3",{id:"none-reducer"},Object(c.b)("inlineCode",{parentName:"h3"},"none")," reducer"),Object(c.b)("p",null,"Do not change store data"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function noneReducer(state, action){\n  return state\n}\n")),Object(c.b)("h3",{id:"replace-reducer"},Object(c.b)("inlineCode",{parentName:"h3"},"replace")," reducer"),Object(c.b)("p",null,"Skip store data and use action payload"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function replaceReducer(state, action){\n  return action.payload\n}\n")),Object(c.b)("h3",{id:"infinitylist-reducer"},Object(c.b)("inlineCode",{parentName:"h3"},"infinityList")," reducer"),Object(c.b)("p",null,"This is the most complex type of reducers that works for endpoint with list data types"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "count": 10,\n  "results": []\n}\n')),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"infinityList")," helpful when you work with infinity List to load next items on scroll to bottom. The basic idea of infinity lists is that when u first enter the page you need to send GET request for first ",Object(c.b)("inlineCode",{parentName:"p"},"n")," rows and on scroll end send one more request to get next batch of data and join 2 array. Next problem is inline editing."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function infinityListReducer(state, action){\n  return {\n    ...state,\n    ...action.payload,\n    results: [...state.results, ...action.payload.results ]\n  }\n}\n")),Object(c.b)("h3",{id:"custom-reducer-function"},"custom reducer function"),Object(c.b)("p",null,"You may create your own logic for reducer. For example:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"function myCustomReducer( state, payload ){\n  return { ...state, ...payload, count: state.count + 1 }\n}\nuseResource({ namespace: 'cars', reducer: myCustomReducer })\n")),Object(c.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Creating your own reducer, please pay attention to ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://redux.js.org/style-guide/style-guide"}),"Redux Style Guide")))))}l.isMDXComponent=!0},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=r.a.createContext({}),l=function(e){var t=r.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},b=function(e){var t=l(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),b=l(n),d=a,m=b["".concat(s,".").concat(d)]||b[d]||p[d]||c;return n?r.a.createElement(m,o({ref:t},u,{components:n})):r.a.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,s=new Array(c);s[0]=d;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var u=2;u<c;u++)s[u]=n[u];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);